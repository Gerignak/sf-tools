<!DOCTYPE html>
<html lang="en">
    <head>
        <title>SFTools - Path Simulator</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="vendor/css/semantic.min.css"/>
        <link rel="stylesheet" href="css/style.css"/>

        <script src="vendor/js/jquery.3.4.1.min.js"></script>
        <script src="vendor/js/semantic.min.js"></script>

        <script src="js/enum.js"></script>
        <script src="js/util.js"></script>
        <script src="js/pets/pets.js"></script>
        <script src="js/core/simulator.js"></script>

        <link href="https://fonts.googleapis.com/css?family=Roboto:300&display=swap" rel="stylesheet">

        <style>
            body {
                padding-bottom: 2em;
            }

            .pet-picture {
                 width: 6em !important;
                 height: 6em !important;
                 margin-left: 0.35em;
            }

            .pet-item {
                padding: 0.5em;
                margin-bottom: 1em !important;
                border: 1px solid purple;
                margin-left: -0.5em !important;
                margin-right: -0.5em !important;
            }

            .pet-item > .column {
                padding: 0.25em !important;
            }

            .pet-item-options {
                margin-right: 0.5em;
                margin-top: 1em;
            }

            .pet-item-heading {
                margin-top: 0.5em !important;
                margin-bottom: -0.5em !important;
            }

            .pet-item-name {
                font-size: 120%;
                font-weight: bold;
            }
        </style>
    </head>
    <body class="margin-none-bottom">
        <div class="ui fixed borderless huge menu css-menu">
            <div class="header item">SFTools</div>
            <div class="right menu">
                <a class="item" href="index.html"><i class="small reply icon"></i><span class="css-small">Go back</span></a>
            </div>
        </div>

        <div class="ui main container">
            <!-- Header -->
            <div class="ui five columns middle aligned grid">
                <div class="one wide column">
                    <b>Type</b>
                </div>
                <div class="three wide column">
                    <div class="ui form">
                        <div class="field">
                            <div class="ui selection compact dropdown" data-op="type">
                                <div class="text"></div>
                                <i class="dropdown icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="two wide column">

                </div>
                <div class="four wide column">
                    <h1 class="ui centered header">Path Simulator</h1>
                </div>
                <div class="six wide column">

                </div>
            </div>
            <div class="ui three columns grid" data-op="items">
                <div class="column">
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="pet-item ui grid">
                        <div class="five wide middle aligned column">
                            <img class="ui centered image pet-picture" src="res/pets/monster800.png" data-op="picture">
                        </div>
                        <div class="eleven wide column pet-item-description">
                            <div class="pet-item-heading">
                                <div class="pet-item-name" data-op="name" data-tooltip="Requirements" data-position="bottom left">
                                    Name
                                </div>
                            </div>
                            <div class="pet-item-options ui tiny form">
                                <div class="two fields">
                                    <div class="field">
                                        <label>Role</label>
                                        <div class="ui selection compact dropdown" data-op="role">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                    <div class="field">
                                        <label>Expected gladiator</label>
                                        <div class="ui search selection compact dropdown" data-op="gladiator">
                                            <div class="text"></div>
                                            <i class="dropdown icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            class ControllerItem {
                constructor (index, $root, controller) {
                    this.index = index;
                    this.$root = $root;
                    this.controller = controller;
                    this.role = 0;

                    this.$name = $root.find('[data-op="name"]');
                    this.$picture = $root.find('[data-op="picture"]');

                    this.$gladiator = $root.find('[data-op="gladiator"]').dropdown({
                        values: [
                            { name: 'None', value: 0 },
                            ... [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 ].map(gladiator => {
                                return {
                                    name: `${ gladiator } (${ gladiator * 5 }%)`,
                                    value: gladiator
                                }
                            })
                        ]
                    }).dropdown('set selected', '0').dropdown('setting', 'onChange', (value, text) => {
                        this.controller.updateGladiator(this.index, Number(value));
                    });

                    this.$role = $root.find('[data-op="role"]').dropdown({
                        values: [
                            { name: 'None', value: 0 },
                            { name: 'Collected', value: 1 },
                            { name: 'Path', value: 2 }
                        ]
                    }).dropdown('setting', 'onChange', (value, text) => {
                        var role = Number(value);
                        if (role == 2) {
                            this.$gladiator.removeClass('disabled');
                        } else {
                            this.$gladiator.addClass('disabled').dropdown('set selected', '0');
                        }

                        this.controller.updateRole(this.index, role);
                    }).dropdown('set selected', '0');

                    this.setType(0);
                }

                setType (type) {
                    var petindex = type * 20 + this.index;

                    this.$name.text(NAME_MONSTER[800 + petindex]);
                    this.$name.attr('data-tooltip', PetDescriptions[petindex]);

                    this.$picture.attr('src', `res/pets/monster${ 800 + petindex }.png`);

                    this.$role.dropdown('set selected', '0');
                }
            }

            const Controller = new (class {
                constructor () {
                    // Variables
                    this.type = 0;
                    this.pets = new Array(19).fill({ Glad: 0, Role: 0 });
                    this.items = $('[data-op="items"] .pet-item').toArray().map((el, i) => new ControllerItem(i, $(el), this));

                    // Events
                    this.$type = $('[data-op="type"]').dropdown({
                        values: [
                            { name: 'Shadow', value: 0 },
                            { name: 'Light', value: 1 },
                            { name: 'Earth', value: 2 },
                            { name: 'Fire', value: 3 },
                            { name: 'Water', value: 4 }
                        ]
                    }).dropdown('setting', 'onChange', (value, text) => {
                        this.setType(Number(value));
                    }).dropdown('set selected', '0');
                }

                setType (type) {
                    this.type = type;
                    this.items.forEach(item => item.setType(type));
                }

                updateRole (index, val) {
                    this.pets[index].Role = val;
                }

                updateGladiator (index, val) {
                    this.pets[index].Glad = val;
                }
            })();
        </script>
    </body>
</html>
